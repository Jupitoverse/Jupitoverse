#!/bin/bash

LOG_FILE="fetch_data_report.log"
HTML_FILE="fetch_data_report.html"
EMAIL_RECIP="abhisha3@amdocs.com"
ERR_RECIP="abhisha3@amdocs.com"
EMAIL_FROM="noreplyreports@amdocs.com"
text_disp="information present at the end"
CONN_STR="postgresql://ossdb01uams:Pr0d_ossdb01uams@oso-pstgr-rd.orion.comcast.com:6432/prodossdb"



log "Starting batch: spec_ver_id [$spec_list] | part_id [$part_list]"

# Run the query
if psql "$CONN_STR" -H -c "$QUERY" >> "$HTML_FILE"; then
    log "✅ SUCCESS: spec_ver_id [$spec_list] | part_id [$part_list]"
else
    log "❌ FAILURE: spec_ver_id [$spec_list] | part_id [$part_list]"
fi


log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

log "=== Script started ==="

# Read spec_ver_id values into an array
spec_ids=(
    '001f916c-43ff-4ecb-a465-bbaea63b9741'
    '0101be20-955e-4f28-89a2-f9830c9140bd'
    '01451646-f1d3-4192-8a28-c7673e9ca404'
    '016d261b-f11d-4a83-9803-3c6075b9163d'
    '018d9aad-84af-4a5c-a648-27b1deb0452c'
    '018dff89-7912-46c9-aaff-caa91b943147'
    '022b431c-151d-4b73-97c2-e35ea2ce874e'
    '02535bee-8456-403c-a752-0ba3b608f1a3'
    '0264a8ec-49a0-4553-a28f-12e4f66462d1'
    '02b2846b-5581-47b1-9bd4-b6adc96de9ae'
    '03fc2ab2-10e1-4816-8a9f-6edbc904634e'
    '0415caeb-3067-41ea-bab8-7223dde922b4'
    '0431645b-f8f7-4c2e-848f-e8edf9f4c41f'
    '04c6837b-cbe4-403c-9984-525a10afaa03'
    '04fd2569-0334-4c70-aeeb-9477403bc834'
    '05050ada-cbf4-4cbb-8b02-64365f347e7f'
    '051fa657-8022-463a-ac88-c38258725119'
    '05483890-19b5-4f15-8a39-4ed3c7a9b218'
    '0582c01e-70d0-486d-8a8b-56f69daf8402'
    '071c7f6c-b9b6-4007-b9cf-aab9e5e202ab'
    '07277c22-f805-4ecf-a6a5-f53506f0107c'
    '0731dff9-8920-4e4b-bf2c-322fc120e8ec'
    '080c160f-1df4-454d-9ae3-2f9c73a45578'
    '096b71d8-8176-4091-8863-b52de4e1f0a1'
    '096b8f51-52f3-41d1-99b8-6c99d09eec45'
    '09842d67-42c9-445f-8619-67a19fb2bc69'
    '0ac6682f-1a50-48f8-977c-3716029444c6'
    '0afff05e-3c0d-4081-b134-73eedc3330a7'
    '0b0056b1-ae28-46dc-ad7f-1216d120800c'
    '0b31cd76-cfa8-4a11-9b68-11d658b74967'
    '0b4b15c1-3e1b-4e74-a293-f850171d3087'
    '0c40f7b4-d0c5-45a0-9e40-0e2c1f572cd7'
    '0cd753dc-e579-4e3f-a0fa-b786386e4991'
    '0cf96140-2790-4b9c-8706-72f6503c67b1'
    '0e3c6bd9-be5a-4f3e-b15b-2ae3e5f190b6'
    '0ea4a497-9817-46dc-ab4d-02f652b95c13'
    '0ed95a8a-0eeb-4e39-a12d-0e5e681879c7'
    '0f3b53a3-c2eb-42e0-8092-0db4a4b28c70'
    '0f50312e-7a83-4a76-acd3-ebcd7d2c7522'
    '0f91e381-84ff-4ced-b3f1-d149653b2e52'
    '0fd1c6ca-9258-4f9e-ae31-8a6e84d899f0'
    '116939ca-4b48-4381-a364-18f630a0b33b'
    '116c1468-cc7e-4d0f-85ac-033a3b7772c1'
    '120ca57c-faa7-4782-8bdd-0d9c81c2f865'
    '1273a650-fbe4-4cca-be43-ca2adee24c9b'
    '137300a2-05e9-4b5c-9088-92ecf02e76c1'
    '14215c5a-3a1c-4732-ac0d-2dfb252d934d'
    '14313a42-a418-4969-9200-9d04ff656226'
    '146913c2-2467-43d4-b773-c3de5091b10c'
    '14ffcf37-0722-4d83-9378-144e2e45ebae'
    '153d2968-d351-4739-af12-fbb751fea162'
    '1692fd65-2b91-4bcc-8527-e194182c47ed'
    '16a704a2-f13e-4690-993e-bc6cdd39b442'
    '17ad66f1-093b-4530-b91a-8ba86f6390e7'
    '17b2b488-b85b-43eb-a646-232ce8974e95'
    '18859abc-197d-4236-b45c-bceb38b661a1'
    '193e7ddf-88c3-4fca-9869-da305f4d6715'
    '19cdd718-1840-475d-a372-1ed06f581711'
    '19cf6c22-4278-4e44-86dc-bdc1bbf15c4b'
    '19e89f28-e31e-49e9-9f85-e1250114509c'
    '1ab7301b-6fa5-4238-87d8-85e7465e5bc5'
    '1b639b26-5db3-446f-be2c-9d5af90fc4f0'
    '1beb1e43-9830-4752-b83a-089fa5904fd6'
    '1c7a9552-31db-4bd9-810e-91ea20c42126'
    '1cc742e8-0b36-479c-a888-0ff5c2e8adf4'
    '1e38c766-acd2-4dcd-8813-b2812274454c'
    '1eafc10a-e597-408c-8f47-d346c8879e15'
    '1eb2c081-a147-4e44-99eb-d57330240dd0'
    '1f5ed765-e357-421d-a2cf-ec539f55e5e0'
    '2072dd2a-22ea-4deb-92e3-7b231c964265'
    '20f109c3-a7ce-4b54-9e44-371bc66c7eb4'
    '21b66487-ac65-495b-83ed-e927c765a2c7'
    '233094c5-94be-4d8f-a3ec-18b2c633f12f'
    '2409be89-592f-4c3b-b6cb-a22dc30cd121'
    '241b9890-c4f1-4c68-919d-6cd3c7ef5f8c'
    '26960e91-7767-4a85-9bce-11c88551bc0c'
    '26b13a48-8115-48d6-893a-b56a48cfa8d8'
    '26b7b4c6-d0e8-4997-bf5a-bdbb5be80017'
    '27376d91-3f92-4889-9886-f270d5050015'
    '28223292-01f4-40d8-8dbc-e28e342e0324'
    '283d4132-0d03-4ce8-9a54-793dcafc0fc1'
    '2852d10e-3346-4ad5-be6c-9272df99dcf1'
    '29ad66d6-cfac-4c8c-937d-a1eb756a6c37'
    '29f59ddc-ce13-46d3-87d7-803633444581'
    '2a2cde8c-358b-45e6-8008-2c5f0d19270c'
    '2a94777c-1d21-4d65-9ad1-6fdf91dd423f'
    '2ac0a9ff-6632-4881-a355-3c7c96932b18'
    '2b8629b1-e6ab-4829-b73d-9d602d8148a2'
    '2c01bc4b-1889-43d5-a37a-8656d431088e'
    '2c07cc0e-18bc-4eea-a7c9-1a2e8fc8903a'
    '2c826ea7-534c-4e8e-a84b-40fea4c25c03'
    '2cfb4f9d-1531-4f98-b78b-4cb6cff17f2e'
    '2d0e5109-4d6d-4b72-905d-94cee84ea7ca'
    '2e0e523e-c167-461f-b791-163a66c2b2bb'
    '2e1a4443-f466-4cc9-af10-e890ecc446b4'
    '2eacb10d-03cc-45b8-9c05-258e643eec44'
    '2f1ba968-a655-4d96-998d-a666069eb57c'
    '2f3b44f8-af5e-471b-b2c2-12f5ea1af04d'
    '300237a1-1a1e-4931-a50e-a6956c7736f1'
    '30a1552b-2774-46cf-b99b-9be25544c621'
    '3178ec5f-d8fd-4ed9-9361-a47c19290ced'
    '323b6eb5-f111-475c-afe1-333c2d5a1e68'
    '32c21e02-9049-476d-a5a2-926e27d2a52c'
    '32cfd2ed-7170-4a62-a27d-f3fbb279fc5c'
    '338f74f0-7c54-4799-824b-9563c019ed72'
    '33bd6bee-baec-4ed9-bf60-9fc7570162ec'
    '3446ccc5-4429-4d91-aa8f-e8cbe8b9617f'
    '34dba11b-7cbd-4397-8a9a-49e089e53aed'
    '3500d07d-c2f3-4586-8273-823638c8370d'
    '365eac02-a2fb-4f50-9025-983caabcf414'
    '36a54cf7-eedd-4424-8098-5b1c0f74709e'
    '36bd4671-fcde-40b6-8663-a7047ac0e2a1'
    '36d08ebf-8614-4f03-9c58-edf72421b91f'
    '380bd8c0-4b02-48aa-9a85-44c5f5700745'
    '384db757-f5f7-464f-81f6-48a67e0519f8'
    '3876445b-a618-42c4-bf05-3c134b8023fc'
    '39345738-5caa-429e-a51f-6b33cb81c5cb'
    '395ea96c-b2b1-4d89-9c8b-36d53f5b3a8a'
    '39c305b8-8692-4d79-909d-b2fd965988a2'
    '3a3726bd-03d3-42c3-ad30-73b0a671dc31'
    '3a57a61c-5c75-4ded-aaec-51c7aeb671f7'
    '3a5e0b0b-1c00-4b81-9475-f87384aa81e8'
    '3aa6fed8-e59f-487c-9710-631db28c1bea'
    '3bc73d23-b764-41f7-8c56-192e57fbbf00'
    '3d8024a2-8bd4-428b-83f7-f94045065265'
    '3d906c13-0b16-459a-8e0f-22f8169721bf'
    '3db90a10-4eff-4fe3-a667-77400d92be72'
    '3ddcc305-261f-4987-8bc7-9d57da04ad37'
    '3ddfcf31-156a-4453-a4d8-d54b3d2739e1'
    '3e706d81-983a-48f9-8029-46e31cb55056'
    '3e712b17-6eae-4456-87a6-68483fc30fe1'
    '3edd30ab-f2a9-4add-96ab-6f9757f97e93'
    '3ee0d647-c68a-4f93-a251-5f56ec900d82'
    '3fe0fd86-7d91-43d5-acdf-2d2774798833'
    '40155c86-6c9d-4c47-91a3-1e14f6f4ad01'
    '40746d4d-3fa4-4a7e-9365-b35468b4eb48'
    '4098824f-21aa-4925-a7ce-dbb7f257871d'
    '40bcf6d8-3c3c-4afd-9416-e5bfb7c5eb01'
    '41b45d37-8a10-4a27-917a-741203b9a916'
    '42054b1c-0f6e-4170-9733-072e4ee1e621'
    '42a29aae-5a4e-4ef0-9109-1f7df0a99313'
    '42ff8078-36f6-4005-b991-e7c8400de93a'
    '435b152c-bf66-4bb2-818c-ccb1c001f394'
    '4389193f-d6ac-4bdb-81ff-1105a36bf694'
    '43b9b5f0-03e7-41a0-9a67-0cc8455b0b96'
    '44ee2736-a09a-4ad3-8f4f-202f06d67661'
    '450fed63-e1ec-4b73-aa4d-87eb6d8dce10'
    '45536bd7-82ff-40e6-91f7-dceb46003147'
    '45b7afa7-a6fa-4f0a-8d00-5ec9f4953214'
    '470935e2-b4c2-483c-9de4-ebc58ee78416'
    '4710295c-33d9-45bf-9876-d4ff39b0c1f2'
    '4763e74e-76a2-4e76-a157-b30784e043bd'
    '47d7de9a-ccf6-4cc1-9593-580f16c9ba8c'
    '4838e843-7450-4ee1-94f0-c414661718bc'
    '486fa7d8-380d-415f-a10a-b1a840707b5b'
    '495840b7-fb00-4df8-993b-e470de9e37c6'
    '495da16f-d657-4291-8e65-838ea59fc54b'
    '4973b86f-2381-4b39-8779-3573fb6a9d8d'
    '4ae58d35-0f8d-4e04-a173-e1f29d4f8a5e'
    '4b0dd9fd-3e46-4aa7-a9ba-18216ac74389'
    '4bd8b09d-71c4-4bdf-9b28-b0ae96ba7204'
    '4c2516e6-3a50-48b6-8bae-fa6f37932d22'
    '4cf15f7a-8c13-42a5-aa41-711bcbea4519'
    '4d25a8d2-6333-4675-bfff-9e183c61a7d1'
    '4e1e062f-06f0-4e95-8bfe-34fb770c674d'
    '4e458a4e-9c42-4b32-932d-db8af04bb655'
    '4f9f2be5-b365-4ad7-a608-8134e2455e7c'
    '4fb16362-635b-47e2-9387-0bd9537f85d5'
    '4fbcd242-8655-4fc5-805b-bcced396735c'
    '4ff72efb-887c-4ae3-8cb8-2c427a788612'
    '50f51e35-5265-40f1-97ff-3a9be5cca3a1'
    '510d2f28-447a-4ec2-9ee3-4bea75ce9091'
    '51527c9b-c252-4695-9edd-4c739d55910d'
    '518ff189-54b9-4d8c-aae4-0039fd21f0a6'
    '52a7b7ce-7712-4f81-930a-41176497149a'
    '53d5b70e-4af7-4bf1-86bd-eb5ddcafad77'
    '53f28497-b566-437a-85d9-a7d64e388ae9'
    '53fd88f0-531f-4d8f-9ea8-74ff86984352'
    '54b17efd-e280-4afc-befa-65feac7b8ff0'
    '552b0a49-ca77-4603-8392-1308d3d6bab8'
    '5558139b-ab67-4b34-bd1a-55a6626cb672'
    '56da1ff2-31ee-4b30-af2b-838a928ca792'
    '56e50a74-f98a-4e64-a605-a8e571971474'
    '579c279d-b441-4e78-907e-8fac4bf5991e'
    '57a51cb9-276e-4d16-a81e-a5966069b96e'
    '596fec37-9e6e-491d-b6f9-23144ba5268a'
    '598a30ba-9c20-4c3a-8c9c-de55fe8ca914'
    '599dfb81-bb13-4eca-b5a7-706b997b8758'
    '59c30416-46d0-43a5-b819-618158c3c07b'
    '59fffe64-cda2-431f-97bc-64ae10b8119c'
    '5a263328-b725-4770-b5da-f2b6b903057f'
    '5add096e-4cf3-4ba0-a5b7-bce6b4429889'
    '5add7f17-c460-4cd8-99a3-75615642e1b8'
    '5b99f75d-f571-4e79-b890-79bed34e2a59'
    '5c3b2d0b-5293-44f4-bba2-619f71817f73'
    '5c4756f6-6e57-4ae8-8c56-9e4582aa80c3'
    '5c51ab35-2094-4aa6-9574-47174e2ee69e'
    '5d1cba7d-7dbc-4b2c-bfe9-b7091e488c9d'
    '5d1e31d4-8296-465d-834a-f99f7a929549'
    '5d35e725-04ad-43a5-9e81-756802422040'
    '5da63886-10d2-4e63-95e9-2e87b9cdc450'
    '5f0712b4-83ac-42a7-bcd0-998438be0ee3'
    '6027f4be-fed3-400e-941a-ef873c387de5'
    '60750d74-cbf1-4837-812d-cf5e10000403'
    '6099aa0f-e5fc-4d17-9276-a4cd7aac5bd6'
    '60a5e58e-7005-4cfa-8dda-a5aedd59307d'
    '6169d059-63fb-4675-b3c2-6e7e997e8e50'
    '61ccb74b-7764-4fc9-af22-7f825215d477'
    '6321c437-ea81-4c66-8bca-f235b0502eb4'
    '63757f28-21ce-45ce-96b4-fa871675e2c6'
    '63bdd4ed-769a-4578-97af-7d7e6d35fb4e'
    '63f65d67-2f9a-4d28-8402-84b5f9f6965e'
    '657dc746-8de3-4dd0-a47b-1d1a630e42be'
    '65aaaa30-83d9-442c-b5ec-ba9d81f78ac4'
    '65ab2338-3aa5-4b49-8f9f-be915ccf3be2'
    '65d7c138-e10d-4ce5-bbc1-47f8c580a0c9'
    '6612e4b8-5dce-458c-9097-acf798eb191a'
    '6694f92b-c82d-48b5-ad09-33d7f59154c9'
    '69600cf4-9100-4677-b152-61f209817d14'
    '6a78dea9-c81d-4244-8aa2-092f2d17e838'
    '6a8b0e1d-04e4-45e2-99cc-46827df55f79'
    '6ad68a12-d606-453b-8cf5-b86b172c3ef2'
    '6c30a78d-48e6-4be7-a78e-17b960e8514d'
    '6d619c2c-9a2f-4601-b002-8aa923fd628d'
    '6d72c9dc-8802-446b-b07b-2e72e35f3fd4'
    '6db6d817-f2f9-4515-b6ad-37647f000372'
    '6e0fbe4d-4976-4543-9a33-4549f164517e'
    '6ebe3c08-73e3-4278-bb18-a7d9d8c6f89e'
    '6fbaaa4a-8fbc-4a00-921e-7ac1208b852b'
    '6ffd07f2-b7e5-4bd4-8839-eb384d4ede20'
    '7044d6e0-a6e1-4a6f-a5c1-c595618a0dff'
    '70b81b9c-fbd8-40f8-b70b-fd4c793ef5dc'
    '70d2eabb-624d-4a66-8199-9e3140ee502f'
    '71813d68-17aa-45c8-b68b-c6532bf7e833'
    '72134aec-82d9-47f5-ba47-5341c16ed278'
    '721e15f6-a2bd-49f1-8e0f-8e1595b011f8'
    '72767fc4-197d-40d8-8d8b-4a43fbfba014'
    '7288dec1-68e6-43a2-b556-12a78d8b4e3c'
    '728a179c-101e-4c44-942f-47c17554d382'
    '72b3e1e0-d66c-477e-ba11-4fc11a581e92'
    '72f07847-fec2-4ab6-b19f-7118715e15a6'
    '730acfd6-2554-4215-8739-f448f8bbb87f'
    '7335d950-e004-4bf8-b354-bb428e03ff33'
    '739e68d6-4e02-4cfe-9764-e9298636189e'
    '73dbc58d-8efb-46e9-88fc-1dcf801bd18b'
    '7418aa66-194f-43a5-b005-c7f1ba19cb7e'
    '7440a0cb-5067-494c-8e36-6a47f9e62405'
    '75259d7f-33cb-49e5-a09a-732b6270eaf9'
    '756add36-3c5c-4dbd-a8bc-08de2ef6a176'
    '757cf26c-ddb6-4f8e-9a7f-ea17e74f2201'
    '762ddbc4-0bd6-4c88-9691-541316d2c093'
    '7714ee58-917f-4cca-8d0c-7cede035a5c4'
    '7737182a-c309-40db-993b-45e2a19d7c00'
    '780ce937-37ec-48da-bccf-45d088bac4aa'
    '78e4c5d8-8a97-4458-bcbc-b31021061b25'
    '78fcc964-a1c5-4610-bd61-ebb58a3b4447'
    '7924b255-0031-4d13-a208-4d5396c1213a'
    '7971f4c5-8d4f-4c56-877b-64276a541f25'
    '7a6b0b25-7d7b-421c-bc8e-7e1bb5560f38'
    '7a8ad8b7-d271-4ed1-a284-8b1b08adbda1'
    '7aba097b-be47-4abb-91f6-adba814533b0'
    '7b30da61-09d4-4b09-8446-2cf13f6268e1'
    '7b92c1da-e02d-48af-ad47-8a34c2b44db0'
    '7d01e99e-85d8-4662-a0eb-b830cb7e9423'
    '7daaf10f-b7c0-4dcc-9c01-5b71e7790ff9'
    '7de81188-44c9-4f61-813c-aee8a578ebae'
    '7f654d4c-80b7-4f98-bd11-23a5cc525db5'
    '7f6ab8d8-1bd6-4325-9ecc-ed8e7efb892e'
    '7ff07d3b-1218-46cd-94ed-be1530f69e1b'
    '80867449-7e39-4c47-9c2e-500b2d4c8e38'
    '80bdfd8a-dcb3-4dc1-9bed-be3d1169c57d'
    '80be52f5-b91c-4273-bdcd-380a43925d9f'
    '81527dab-63ad-4bb1-a351-296a1883648c'
    '81b5fae4-81fd-4c6b-ad3f-e8789e2a9c53'
    '81d015c4-797d-45e7-96f2-c251e2cefbd1'
    '82c5084e-3112-4c3f-9f51-f734bb802510'
    '8313bbdf-9c7d-4bc3-9ed3-4a5fab886276'
    '83179879-d967-4c83-bc2d-96511e5f791b'
    '83564a95-6215-4363-ab62-8eed17b72cd4'
    '84e44fcb-f848-4547-a278-6c626ea20747'
    '8516624a-5b1f-441e-b994-52755964554d'
    '855dcbe1-c67a-4294-8f6d-4923516219ef'
    '87ceb9a8-0a89-4692-8916-b6e50301dbe0'
    '87e6518a-f872-4452-bf9c-a3fab95fafee'
    '882f443f-ae73-4c3e-a177-f33b5b9d92c9'
    '88d6fdfd-a73e-45c0-b69b-4224c4ae85c3'
    '89eee46f-fdd5-4c79-9cd8-f9f58e237f0f'
    '89fee0f9-e9df-456c-b591-89acf2acc45d'
    '8a761a50-1e71-4440-b554-134a003e0db5'
    '8af10f50-a9ff-4daf-a4fa-5f6d40074710'
    '8b1bdaaf-b8ff-4d75-9eef-61e62cdfe680'
    '8b2161a8-67e8-4c3a-8d03-127e8fc27acd'
    '8b2ba4b3-2b7a-4837-bd54-183d577e05bb'
    '8b86a7c6-51ef-49ba-9824-a0a4490f769b'
    '8bc023a7-0b6c-4460-8b2b-e5326c3d6033'
    '8c5f28ef-8514-4d4d-9b56-546d7d4eb08b'
    '8d51fd0c-95d5-407c-a641-d698f1b94f23'
    '8da1b10e-bd32-4c85-8de5-faa889df0822'
    '8e0a5b65-39e9-4512-855f-4f267f884deb'
    '8e1b868b-fc7c-46e4-869d-2fe9979b6a70'
    '8e8a6c58-c695-4405-8781-a709083d710d'
    '8ea1da1f-f878-4785-a8a5-988f33dce4a7'
    '8fc7fb7b-8189-4681-87e0-ce5e9695ead3'
    '8ff89ee1-c657-4b20-a7d0-b64261b9d3c1'
    '9031224a-f0a9-4dff-b30c-dcf8d0958e5d'
    '90a04eaf-772a-4548-b09f-1c60ae39665d'
    '90c7a90e-bafe-4d92-8a67-7bdffcf4bda2'
    '91307290-34be-4c4f-ac9b-08c67963bb21'
    '9143dab3-f1f9-47bb-a2d3-c052d79ab44b'
    '9157ef92-a954-4da1-9be4-2d71c78a9b04'
    '91600b2a-c91e-4bd3-a8a6-be22d10f3455'
    '921c0d70-c924-4757-9f10-912607de3742'
    '94292bd2-fa8b-4ec2-a1fd-2ee756b7337b'
    '952e8c96-cc17-4628-b9bf-ed6a1d9c52a0'
    '9553396a-2a63-4ecf-8eae-954d411566f3'
    '9575be73-1c3f-4901-9a4a-8f09eab1e62c'
    '95f2fc59-5ba5-4642-894c-ef645defaeb7'
    '967cfcd3-9960-4227-adfa-83ce73c4f682'
    '96a0ee75-d9d8-490d-974d-9a81063866ff'
    '96fd9b4e-29f0-4106-8d41-c74ac2037003'
    '97ab261b-5b51-4678-b777-f9c2cf1275fc'
    '982a0f3e-e42f-45e6-9dea-4a724cbfcf9b'
    '994a2f77-2ce5-462b-af22-f447e8a475d8'
    '9987b713-c3f0-4ce5-824a-b8753c9bc4ad'
    '99adc337-d435-465d-82a5-49a49c12d17c'
    '9a068f36-6147-4426-88bf-f247241705c9'
    '9a3e02d4-7fd1-440d-925b-e8320f528bc3'
    '9a6b4725-f02c-4f68-a332-374d8bcb325f'
    '9b676364-78ae-45a4-88ed-97577c4d6a97'
    '9b82e172-1bd4-4179-aad3-44268fd0a605'
    '9c3dd2d8-cdee-4c44-bb06-5d290bab4fe3'
    '9c5968fc-7926-4c68-ab04-aa5d8e80725a'
    '9cd03387-4f27-4cec-939a-39b18e0bce62'
    '9ceea906-5910-43a1-9fe8-21082f2713ca'
    '9d134f01-8a9c-461a-8a2f-a6d4f0bf6988'
    '9db33e96-d35c-4919-8ea0-8f9c830be5f8'
    '9ee1682a-20ea-438b-a0c0-76309e3a1044'
    '9fb3e1b0-a3fa-4556-a2ad-b912194f5373'
    '9ff4cc23-efaf-4802-a3fb-c5213f6d7eb3'
    'a040c986-854c-4485-9542-cba9dbfa1df7'
    'a06beeff-9ebe-405a-8214-a06ab60eef6c'
    'a2121cb0-1b31-484e-bd8c-9881296fb313'
    'a21bcd77-ba70-448d-bf93-22593a6488b8'
    'a2ba2793-8f67-4855-8716-2eb28ed2daa6'
    'a2ebfe27-954c-493c-a648-9f195de53526'
    'a33cd5fd-ca2d-403a-83fc-1791bb510178'
    'a38600e1-ad12-4eff-bd28-d3ed0311acc7'
    'a493465b-7861-4c26-8916-8c5252cf18cb'
    'a517aa0d-858e-4fd6-b22f-88a1eb51647d'
    'a528108a-2d4f-4d81-aef9-fc92ac99486d'
    'a57ba951-1d1b-4265-8d70-3e23ac97ce05'
    'a5b79d9b-2eea-4dd9-bea4-30e1c61c223b'
    'a605fd9a-ceb0-4723-b8c2-a9b80452032c'
    'a651e4f5-d62f-4e53-9efa-b2de177395da'
    'a6ea3ac5-984b-4d47-a304-09d93ba60597'
    'a6fa070d-e4d8-4598-8116-1cc1a3803b9f'
    'a711ad5b-e026-4122-945c-08196f1cf123'
    'a71ff051-97d1-45a7-9086-20297106ad7d'
    'a73b66bd-443a-4ed3-820d-f3e9602b03a9'
    'a7911e5f-70c5-4ef5-9edb-624aeecdac6f'
    'a8389bb5-f2d9-4559-85b7-9478e95375c2'
    'a893c125-289f-4f80-a886-7b3530872090'
    'a957df54-b68b-42e5-848b-ddacfaa7a499'
    'a9927999-e918-43f5-b3ea-8c059702bf57'
    'aa05613c-b91b-47bc-aea4-cb7653485c91'
    'aa345cc4-9875-44bb-9328-ed586ad2fbd9'
    'aa4aa9bd-3c2e-419f-95b0-b704fd4dbcd4'
    'aa8b9c29-fa0b-4b18-96a4-d3b8adc9350f'
    'ab683dcb-0583-4672-a97d-49c04b2a2229'
    'ace50495-f69b-45c7-88d3-1b72433be181'
    'ad18ba87-2c64-46b4-b499-5991e6630d75'
    'ad6bb4f1-4b4d-4db5-a8ed-c6b8c682700f'
    'ad805c73-a207-4246-8d81-009d06806c03'
    'ad8b79cf-7ac9-4dd3-a822-bb0f65a9b038'
    'adeed6f1-a115-4ad3-96fa-20c0e9e58cf8'
    'ae0092b2-00b2-4307-b0bc-8d9cf4da72e9'
    'aea97184-8a73-438d-9d6a-2a26d4dd6f35'
    'aeabe3e2-ab02-4494-a9e8-dd98fe435bf3'
    'afb42730-41b3-44d7-8881-1e88ddcbb332'
    'afb4ed8e-21a2-4745-a422-6cfc461ec256'
    'b0259050-f452-41c6-a7af-bdf8338a1355'
    'b0cea6c1-fe49-438c-9b9a-f4408ad3f4b3'
    'b2267ef1-85c8-4bf8-b868-c74103b15850'
    'b26c39ce-ac68-476a-9a8a-3f938217c5be'
    'b34e3007-f93c-4adb-a024-7b84d7bfa855'
    'b3570bc7-3e53-4545-8997-6d5d71e704a6'
    'b39dcb4c-e206-4239-8f26-9d074bfeec5d'
    'b3bc505d-14f6-4480-a5f7-0fe25fd3a05e'
    'b3cfd6c9-4612-42c4-ae51-509dca1a5c6e'
    'b3cfee90-2324-44ef-99e2-e25028496a10'
    'b3f6bc18-6565-4d6a-b110-cbc22f424138'
    'b495f631-6fb6-4165-816d-de998836d94a'
    'b4e0a74a-eff2-4b8e-9d35-6f79e5aa9f4a'
    'b5ed409d-366b-4246-ac26-9811b576a893'
    'b65928d3-df33-4877-b8eb-1bcb4acc5b80'
    'b7657a77-f41d-4f65-9e27-702c87573b49'
    'b7826ea3-8506-4697-8e87-389158a34c93'
    'b8031e5d-aaed-464d-8f9c-c4ff0c363647'
    'b893d8b0-c3ba-4891-9051-970ec7469788'
    'b9a47923-d73a-452d-9067-8b848488bee7'
    'bb39c80a-8ee2-42c6-9a54-a29e2ee1a167'
    'bba8f8c3-224a-4f7f-8a51-40a0b72101f1'
    'bbb32d30-eb6b-4757-b696-3c89d6feafea'
    'bcdd38cd-b043-4c46-9d58-0893b15b8eea'
    'bf3d142d-ca5b-40e8-b152-53c26c31b0ff'
    'bf63ac38-d0bb-47a8-9475-04946f3c9a88'
    'c039c5d7-17e2-4127-baac-70071a44c306'
    'c10bda5a-5371-4a79-854d-de2a8d3ef419'
    'c209cc3d-3968-42f4-8a87-b9b9b345553b'
    'c26e2bae-f261-4a52-8e2a-990ce1669443'
    'c2a0cf64-07df-41f0-bd19-8a5aa396d4df'
    'c4135363-d9c3-41e8-b5ed-f55c228ee184'
    'c48f01c1-4c3a-4f3e-90c2-ce117caf0174'
    'c4a5f218-7a90-489c-afca-6f554cfc7057'
    'c52065ef-0fa5-46a3-832c-c98d1368ec46'
    'c53a7a57-e7d5-4e2e-92bb-c1ddd8487543'
    'c5d1bfd4-fc0c-4aa3-a871-9e8779800824'
    'c685ef7d-08de-4542-9035-6dcca0d13aa6'
    'c6d45581-80b2-4dfc-9f96-27af33946146'
    'c7b37dbc-d17d-4cab-abf6-5f3562035db4'
    'c8011292-3b95-4488-9b2a-7b8a8c85cab2'
    'c8a89695-ecb9-4bac-a457-fd86275e00a7'
    'c93c6d7f-fa6c-4b5e-a8a3-9c906590e9c2'
    'c9f6cc25-237e-4aa8-972c-33e6cda378af'
    'ca849a53-50c9-426a-a711-35105573e968'
    'cad04903-212e-42e5-b2a0-a97fd53ad9b9'
    'cb1ff24b-79c2-429e-8172-5d3ba5b9eb8b'
    'cc64b307-3337-4ac1-83e9-9a088535b6a6'
    'cce448bc-3b6b-4538-a0b6-41d4e52f68fa'
    'cd307c7e-93b5-44c0-8f85-7d9b35b64765'
    'cd806be0-8d68-4f86-9096-349d30dd5822'
    'cd8e8efa-3cb0-4fe3-8922-9e2eea386e8f'
    'cda51f93-d504-4063-bac6-d6f7f5c36c57'
    'ce1432ad-ae91-41dd-bf80-82cfc0064d62'
    'ce849a3e-4418-4d2c-8d5f-b8bb60fc704b'
    'ceae0ce1-0501-42f9-ad78-ba078c258707'
    'ceed280c-96df-4eb2-95d5-ee49685db67e'
    'cf5f41c4-4f99-46f3-8984-2b7d9170130d'
    'cf9b1d6c-9d62-4f6f-b055-4d6a4856fa1a'
    'cfa17e93-49e5-4ed0-ae6a-62d3cb9bc59c'
    'cfd10258-2b98-428f-b03c-87aa2821b1ba'
    'd0123ce0-9bb5-4ce8-bce1-731124575499'
    'd0898281-1278-41e6-bf2e-5a67c97e708a'
    'd0eb5e31-6c22-42a6-824d-7d3fd6db1da8'
    'd0f32205-33dd-4e2d-8a93-76004beccd94'
    'd18b4172-8a82-4072-a61b-a8619dfb15de'
    'd1fd8ea4-712f-4bea-9417-2e72067f113a'
    'd2418caf-e88c-4efe-9448-5c11dbca696b'
    'd26ec502-1fc0-4d18-95db-766f26155bba'
    'd2b3debf-34d0-468e-8bde-c878dfd819f2'
    'd300d66b-af96-4f2a-a919-4546813f6592'
    'd36eef48-ec74-4bab-94c1-e028ee190c33'
    'd3a0883c-a571-4e4c-a41c-56ea9e0ccea5'
    'd433dcdc-9a41-4b2e-aeac-9d2248621262'
    'd44d951c-431d-4139-b7c4-0a9df3bd65e9'
    'd4a781f7-b6f0-48db-a60c-1576c5403ed2'
    'd50f22a5-5215-45f5-94ea-50c004e4ccd4'
    'd53cb841-08da-4bce-b0cc-30e23dd1e78d'
    'd5774800-eede-4057-9002-786e97a8bcbb'
    'd6e6e2b8-0413-49f5-8f38-884e182ba6b1'
    'd79ca662-2547-4fa7-9cb7-c59368598fb9'
    'd841ebbc-e6d3-48a9-82f2-13718ad195ef'
    'd8dd2da9-39dd-47f2-af3e-149414f49f2e'
    'd91d472a-e3c4-4b02-a0d2-5c52df2ed36c'
    'dae25bd6-ec0c-4c6c-ba0b-4c8669bd9529'
    'db57c4ed-0b0d-43cc-bf9a-44a2170d355c'
    'dc2bfe0b-dd5b-4a36-810c-7d0ef5b23d8e'
    'dc541b41-51b0-4ffb-8bbe-ff7ce5750f8f'
    'dd26e4fb-6602-4572-ab89-c3460beb2bc9'
    'dd38614b-f0d0-45a0-aacf-ce23bbd993f6'
    'ddbc616c-319e-4723-b21e-025c467a3080'
    'ddeb8b64-4e2d-4817-8155-9a726e1e8e6b'
    'de2cee77-1e5d-4181-970d-4a73be508635'
    'de8006bc-b24c-431c-b475-af0548de7436'
    'dea8db74-c0c1-4c08-b965-3b1d3233d827'
    'e0217818-b0a1-4a67-b58a-ad45e2e37ca3'
    'e1a4e2e6-c3ed-4905-90aa-1e0de97e2ff7'
    'e1f244db-7518-404d-a269-04a6470a93fa'
    'e2e87391-3c15-4037-a826-01940041b7a8'
    'e338e334-03bf-49dd-95d3-630cfe9cc446'
    'e4aef905-b6d6-43fa-862d-c7acd2ca15bb'
    'e4ebb5bc-94bc-4d97-8a0a-e6d066437a7d'
    'e5155d69-1551-4da4-9bc4-2074bf1a51d2'
    'e586e0f0-d26d-430d-b022-f33407c39c1e'
    'e5ca0afd-740c-4229-b4aa-718735caae59'
    'e5d03e7d-11d5-40ad-9392-b0eaa0372f6a'
    'e5f5fabb-42d8-4dca-b9cf-52bfc0240725'
    'e637763d-3f24-4c1c-85e8-0cc495b2a2ad'
    'e689403a-167e-4e9d-a6fb-9f5e6f9cffa9'
    'e6a98704-acfc-45fe-811f-f693f5133592'
    'e6aec477-b9c7-4ee8-8847-7363a25b3f75'
    'e7781004-c374-4151-b3e8-0ec7583b5aad'
    'e7e6b5d9-e3f7-4856-8498-755b5946209a'
    'e8ba6318-3aec-48ab-87ed-ed9b62fbac4c'
    'e8d577b1-066e-4dc7-a48c-8a9ab2f9084f'
    'ea013bfc-decf-4e52-9d3a-6facfec6d7c2'
    'ea4297c0-1f7b-4e9c-9729-e4b05dec28c7'
    'ea908a69-d243-4d84-b9be-410944ce8735'
    'eb7addd0-3906-41b7-8e42-96cbed7fb0d8'
    'ec267bf5-1877-4747-90e1-844b40edaa2c'
    'ec60a664-f080-4141-ba63-1e31922fac1f'
    'ece985e8-c5b8-477f-ac97-2abd7d8905e9'
    'ed11c01a-b40e-4caa-9848-97c30d2e9aa1'
    'ed1b8d54-2347-4644-a5f3-db5f7029baaa'
    'ee4e9f64-8b43-460d-974f-fca864d1a89e'
    'eebac918-c8cd-41ba-aa02-5bff186b5493'
    'ef27704b-39e8-4a8c-a25d-3b30583a016d'
    'ef560dd0-e9bb-4cd1-8194-51d801a83911'
    'ef814f65-609a-402f-a51e-8ad5a65aaca1'
    'ef93a8f8-050a-47e6-82b8-e3f38aff7314'
    'eff10f8b-42f4-455e-aeef-a718d130de68'
    'f03f7f8e-ad2d-44c7-93ca-ccc61a74c0b9'
    'f04c0832-a9ff-41d3-9c0e-6a84900b2ac6'
    'f0925749-7e0e-468d-b073-babedfd1f652'
    'f099e1a1-1550-4343-9c30-1bd1906c0469'
    'f10609f8-de4f-4c87-998f-94196fddd72f'
    'f1062746-df45-4d09-8f64-e55e72025c4d'
    'f24d47d5-bd56-49ae-a993-1be3fa9d33a2'
    'f2c68551-5abd-45ac-bd1e-dd21904b7237'
    'f32e6885-34f4-420d-b4e9-37c0d6714d2a'
    'f3533daa-8304-45b3-a74c-09f1e8820eba'
    'f3875133-47b9-4e08-bc65-04eb4cacfbc9'
    'f3bf6343-682e-4f76-a769-e2f724c67770'
    'f3ef3c35-5ce9-43de-ac85-8284329f657b'
    'f4012105-3f47-41f5-93d4-ba7872df1297'
    'f49fde08-bc3c-4394-87dd-62d6b36e1803'
    'f4d35a54-67d4-4da0-bce1-cb993d47ece2'
    'f5023074-0025-49f4-9c39-954c718f643c'
    'f50b915a-43d1-4514-b758-79df5e2bcb16'
    'f55dbc11-73e2-419c-bc04-f9580a20d132'
    'f5a3929e-6819-4282-a45e-453a8ee3def4'
    'f600b21a-c12e-4fd6-b95b-09435b5098c2'
    'f6065f23-c802-4535-90b5-da268a3d8cfb'
    'f6521115-e3dd-4786-8003-52e17b7743eb'
    'f69e49c1-f08c-4564-94df-6ef2e0f5554d'
    'f7851899-1e4b-4039-a624-b0150202d9c7'
    'f7dff398-0ab9-4d50-a736-b727dc3e4150'
    'f7ec0e6b-970a-47cb-bb96-a3a005c8f3e0'
    'f877ed34-3548-4ad0-af33-724a96fee1d0'
    'f8d2181e-af9a-4087-a3bc-a27949990ab8'
    'f8d6e6df-bfab-442d-aa26-d0fdde4acb2f'
    'f974f62f-a4a1-4790-9fa0-ee822c02f492'
    'f9b30f27-6931-424a-a4d3-14869a6a3e9f'
    'fa6de879-66be-45e2-b182-26a106e37546'
    'faf6075b-13a4-445f-83e0-de57caf80dae'
    'fb018c5a-43f9-4b78-8d1a-737b90fa0c52'
    'fb6949b3-7d9f-4822-afca-70ce064f6d29'
    'fcc348f6-1c5f-4117-ace9-d7d6b9967e0b'
    'fcddb213-b653-4e0e-8ab4-7b3280052439'
    'fddbc1f4-6484-41be-989a-5950f3143e0c'
    'fde90d6c-1b71-4603-870b-5efe0666e98a'
    'fe28d350-2366-476e-a8aa-c795062e780e'
    'ff87e9be-faf7-4e47-aeda-845a05212a35'
    'ffb08018-f35a-42da-9c09-04e9a7438210'
    'ffc98da0-b567-439b-acdf-fb064af763e1'
)

day=$(date +%d)
if (( day % 1 != 0 )); then
    log "Skipping execution today (day $day is not a multiple of 5)"
    echo "Skipping execution today (day $day is not a multiple of 5)" > "$HTML_FILE"
    mailx -r "$EMAIL_FROM" -s "Skipped Report Execution" "$EMAIL_RECIP" < "$HTML_FILE"
    exit 0
fi

log "Proceeding with data extraction..."

# Loop over spec_ver_id in batches of 10
batch_size=10
total=${#spec_ids[@]}
for (( i=0; i<$total; i+=batch_size )); do
    batch=(${spec_ids[@]:i:batch_size})
    spec_list="'${batch[0]}'"
    for (( j=1; j<${#batch[@]}; j++ )); do
        spec_list+=",'${batch[j]}'"
    done

    # Loop over part_id from 1 to 100, one at a time
    for (( part_id=1; part_id<=100; part_id++ )); do
        log "Running query for part_id=$part_id and spec_ver_id batch starting at index $i"
        QUERY="select spoi.id as projectid,oas.value as customer_id ,oas2.value as site_id ,oas4.value as projectOwnerName,oas5.value as siteName ,oas6.value as PTD,o1.entity_name,spoi.name,oai.last_update_date,oai.create_date,oai.status ,spoi.status,oai.id as activity_id from ossdb01db.sc_project_order_instance spoi,ossdb01db.oss_activity_instance oai,ossdb01ref.oss_ref_data o1,ossdb01ref.oss_ref_attribute o2,ossdb01db.oss_attribute_store oas,ossdb01db.oss_attribute_store oas2 ,ossdb01db.oss_attribute_store oas4 ,ossdb01db.oss_attribute_store oas5,ossdb01db.oss_attribute_store oas6 where oai.part_id in($part_id) and oai.implementation_type = 'Manual' and oai.spec_ver_id in($spec_list) and oai.state in ('In Progress', 'Rework In Progress') and oai.last_update_date < current_date - interval '30' day and spoi.plan_id = oai.plan_id and spoi.manager is distinct from 'ProductionSanity' and oai.is_latest_version = 1 and spoi.is_latest_version = 1 and spoi.name not like '%MM_PROD_TEST%' and spoi.status not like 'FCANCELLED' and o2.attribute_value = oai.spec_ver_id and o1.entity_id = o2.entity_id and oas.parent_id = spoi.objid and oas2.parent_id = spoi.objid and oas4.parent_id = spoi.objid and oas5.parent_id = spoi.objid and oas6.parent_id = spoi.objid and oas.code like 'customerID' and oas2.code like 'siteId' and oas4.code like 'projectOwnerName' and oas5.code like 'siteName' and oas6.code like 'DMD_PTD';"
        if psql "$CONN_STR" -H -c "$QUERY" >> "$HTML_FILE"; then
            log "✅ SUCCESS: part_id=$part_id, spec_ver_id batch index $i"
        else
            log "❌ FAILURE: part_id=$part_id, spec_ver_id batch index $i"
        fi
    done
done

log "=== Script completed ==="

# Send final report
mailx -r "$EMAIL_FROM" -s "Final Report" "$EMAIL_RECIP" < "$HTML_FILE"